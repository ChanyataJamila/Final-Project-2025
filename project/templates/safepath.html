<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SafePath — พยากรณ์การรอดชีวิต</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <button id="reset" class="predict-btn" style="background: gray;">Reset</button>
</head>
<body>
  <div class="app" role="application" aria-label="SafePath app">
    <header>
      <div class="logo">SP</div>
      <div>
        <h1>SafePath</h1>
        <p class="lead">พยากรณ์ความน่าจะเป็นในการรอดชีวิตของผู้บาดเจ็บที่ศีรษะจากอุบัติเหตุรถจักรยานยนต์</p>
      </div>
    </header>

    <main>
      <!-- LEFT: form -->
      <section class="card" aria-labelledby="form-title">
        <div id="form-title" class="section-title">ข้อมูลผู้บาดเจ็บ</div>

        <!-- basic info -->
        <div style="margin-bottom:12px">
          <div class="small" style="margin-bottom:6px">เพศ</div>
          <div class="btn-group" id="gender-group" role="tablist" aria-label="เพศ">
            <button class="btn" data-value="female">หญิง</button>
            <button class="btn" data-value="male">ชาย</button>
          </div>
        </div>

        <div style="display:flex;gap:12px;align-items:center;margin-bottom:14px">
          <div>
            <label class="field">อายุ (ปี)</label>
            <input id="age" type="number" min="0" value="30" />
          </div>

          <div>
            <label class="field">ประเภทการบาดเจ็บ</label>
            <div class="btn-group" id="type-group">
              <button class="btn" data-value="pedestrian">เดินเท้า</button>
              <button class="btn" data-value="driver">ผู้ขับขี่</button>
              <button class="btn" data-value="passenger">ผู้โดยสาร</button>
            </div>
          </div>
        </div>

        <div class="row" style="margin-bottom:12px">
          <div>
            <label class="field">การดื่มแอลกอฮอล์</label>
            <div class="btn-group" id="alc-group">
              <button class="btn" data-value="no">ไม่ดื่ม</button>
              <button class="btn" data-value="yes">ดื่ม</button>
              <button class="btn" data-value="unknown">ไม่ทราบ</button>
            </div>
          </div>

          <div>
            <label class="field">ใส่หมวกนิรภัย</label>
            <div class="btn-group" id="helmet-group">
              <button class="btn" data-value="no">ไม่ใช้</button>
              <button class="btn" data-value="yes">ใช้</button>
              <button class="btn" data-value="unknown">ไม่ทราบ</button>
            </div>
          </div>

          <div>
            <label class="field">ใช้โทรศัพท์มือถือ</label>
            <div class="btn-group" id="phone-group">
              <button class="btn" data-value="no">ไม่ใช้</button>
              <button class="btn" data-value="yes">ใช้</button>
              <button class="btn" data-value="unknown">ไม่ทราบ</button>
            </div>
          </div>
        </div>

        <hr style="border:none;border-top:1px solid #eef2f6;margin:12px 0" />

        <div class="section-title" style="margin-bottom:10px">ข้อมูลการบาดเจ็บ / สัญญาณชีพ</div>

        <div class="grid-2" style="margin-bottom:8px">
          <div>
            <label class="field">ความดันโลหิต (Systolic BP mmHg)</label>
            <input id="sbp" type="number" min="0" value="120" />
          </div>
          <div>
            <label class="field">อัตราการหายใจ (RR /min)</label>
            <input id="rr" type="number" min="0" value="16" />
          </div>
        </div>

        <div style="margin-bottom:10px">
          <label class="field">ชีพจร (Pulse /min)</label>
          <input id="pulse" type="number" min="0" value="80" />
        </div>

        <div style="margin-bottom:10px">
          <div class="small" style="margin-bottom:6px">ระดับการรู้สึกตัว (GCS) — แยกเป็น 3 ส่วน</div>
          <div style="display:flex;gap:8px;flex-wrap:wrap">
            <div>
              <label class="field">การลืมตา (Eye opening)</label>
              <select id="gcs-eye">
                <option value="4">ลืมตาได้เอง — 4</option>
                <option value="3">ลืมตาเมื่อถูกเรียก — 3</option>
                <option value="2">ลืมตาเมื่อเจ็บ — 2</option>
                <option value="1">ไม่ลืมตาเลย — 1</option>
              </select>
            </div>
            <div>
              <label class="field">การใช้คำพูด (Verbal)</label>
              <select id="gcs-verbal">
                <option value="5">ตอบถูกต้องเต็ม — 5</option>
                <option value="4">พูดเป็นประโยคสับสน — 4</option>
                <option value="3">พูดเป็นคำ ๆ — 3</option>
                <option value="2">ส่งเสียงแต่ไม่เป็นคำ — 2</option>
                <option value="1">ไม่ส่งเสียง — 1</option>
              </select>
            </div>
            <div>
              <label class="field">การเคลื่อนไหว (Motor)</label>
              <select id="gcs-motor">
                <option value="6">เคลื่อนไหวตามคำสั่ง — 6</option>
                <option value="5">ไม่ทำตามคำสั่งแต่รู้ตำแหน่งเจ็บ — 5</option>
                <option value="4">ชักแขนขาหนีความเจ็บปวด — 4</option>
                <option value="3">แขนงอผิดปกติ (decorticate) — 3</option>
                <option value="2">แขนเหยียดผิดปกติ (decerebrate) — 2</option>
                <option value="1">ไม่มีการเคลื่อนไหว — 1</option>
              </select>
            </div>
          </div>
        </div>

        <div style="margin-top:12px">
          <div class="small" style="margin-bottom:8px">AIS — ให้คะแนนความรุนแรงของแต่ละส่วน (0=ไม่ทราบ/ไม่มี, 1-6)</div>
          <div style="display:grid;grid-template-columns:repeat(2,1fr);gap:8px">
            <div><label class="field">BR1 Head/Neck</label><select class="ais" data-region="BR1"><option value="0">0 ไม่ทราบ/ไม่มี</option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option></select></div>
            <div><label class="field">BR2 Face</label><select class="ais" data-region="BR2"><option value="0">0 ไม่ทราบ/ไม่มี</option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option></select></div>
            <div><label class="field">BR3 Thorax</label><select class="ais" data-region="BR3"><option value="0">0 ไม่ทราบ/ไม่มี</option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option></select></div>
            <div><label class="field">BR4 Abdomen & Pelvic</label><select class="ais" data-region="BR4"><option value="0">0 ไม่ทราบ/ไม่มี</option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option></select></div>
            <div><label class="field">BR5 Extremities</label><select class="ais" data-region="BR5"><option value="0">0 ไม่ทราบ/ไม่มี</option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option></select></div>
            <div><label class="field">BR6 External</label><select class="ais" data-region="BR6"><option value="0">0 ไม่ทราบ/ไม่มี</option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option></select></div>
          </div>
        </div>

        <div style="margin-top:12px;display:flex;gap:8px;align-items:center">
          <div>
            <label class="field">เวลา (นาที) — เหตุ -> โรงพยาบาล</label>
            <input id="time-min" type="number" min="0" value="30" />
          </div>

          <div style="margin-left:auto">
            <button id="predict" class="predict-btn">Predict</button>
          </div>
        </div>

        <div class="footer note">* ผลลัพธ์เป็นการประมาณเชิงสาธิตเท่านั้น ไม่ใช้ทดแทนคำวินิจฉัยทางการแพทย์ *</div>
      </section>

      <!-- RIGHT: results -->
      <aside class="card" aria-labelledby="result-title">
        <div id="result-title" class="section-title">ผลการทำนาย</div>
        <div class="result" id="result-area">
          <div class="box">ความน่าจะเป็นในการรอดชีวิต: <span id="surv">-</span></div>
          <div class="box">Injury Severity Score (ISS): <span id="iss">-</span></div>
          <div class="box">Revised Trauma Score (RTS): <span id="rts">-</span></div>
          <div class="box" style="display:flex;justify-content:space-between;align-items:center">
            <div>
              สถานะ: <span id="status-text">-</span>
              <div class="small" style="margin-top:6px;color:var(--muted)">อิโมจิสื่อความรุนแรง</div>
            </div>
            <div class="emoji" id="status-emoji">—</div>
          </div>
        </div>
      </aside>
    </main>

    <footer class="note"> SafePath </footer>
  </div>

  <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
